<!-- templates/index.html -->
{% extends 'base.html' %}
{% load static %}

{% block title %}Home - NyumbaFasta{% endblock %}

{% block extra_css %}
<style>
    :root {
        --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        --dark-gradient: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
    }
    
    .hero-section {
        background: linear-gradient(rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.85)), 
                    url('https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        padding: 180px 0 120px;
        color: white;
        position: relative;
        overflow: hidden;
    }
    
    .hero-section::before {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 0;
        right: 0;
        height: 150px;
        background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%23ffffff' fill-opacity='1' d='M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
        background-size: cover;
        background-repeat: no-repeat;
    }
    
    .hero-title {
        font-size: 3.5rem;
        font-weight: 800;
        background: var(--primary-gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 1.5rem;
        line-height: 1.2;
    }
    
    .hero-subtitle {
        font-size: 1.25rem;
        color: rgba(255, 255, 255, 0.9);
        margin-bottom: 2.5rem;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
    }
    
    .search-card {
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(20px);
        border-radius: 25px;
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.2);
        padding: 2.5rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        position: relative;
        z-index: 1;
    }
    
    .search-card::before {
        content: '';
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: var(--primary-gradient);
        border-radius: 27px;
        z-index: -1;
        opacity: 0.1;
    }
    
    .category-card {
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        border: none;
        overflow: hidden;
        border-radius: 20px;
        background: white;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        height: 100%;
    }
    
    .category-card:hover {
        transform: translateY(-15px) scale(1.02);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
    }
    
    .property-card {
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        border: 2px solid transparent;
        overflow: hidden;
        border-radius: 20px;
        background: white;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.06);
        height: 100%;
    }
    
    .property-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        border-color: #667eea;
    }
    
    .property-badge {
        position: absolute;
        top: 20px;
        left: 20px;
        background: var(--primary-gradient);
        color: white;
        padding: 8px 20px;
        border-radius: 25px;
        font-size: 0.85rem;
        font-weight: 600;
        letter-spacing: 0.5px;
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        z-index: 2;
    }
    
    .stat-card {
        background: var(--dark-gradient);
        color: white;
        border-radius: 20px;
        padding: 2.5rem 1.5rem;
        height: 100%;
        transition: transform 0.3s ease;
        position: relative;
        overflow: hidden;
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    }
    
    .stat-card:nth-child(2) {
        background: var(--success-gradient);
    }
    
    .stat-card:nth-child(3) {
        background: var(--secondary-gradient);
    }
    
    .stat-card:nth-child(4) {
        background: var(--primary-gradient);
    }
    
    .stat-card:hover {
        transform: translateY(-10px);
    }
    
    .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: rgba(255, 255, 255, 0.3);
    }
    
    .feature-icon {
        width: 90px;
        height: 90px;
        background: var(--primary-gradient);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 25px;
        box-shadow: 0 15px 30px rgba(102, 126, 234, 0.3);
        transition: all 0.3s ease;
    }
    
    .category-card:hover .feature-icon {
        transform: scale(1.1) rotate(5deg);
        box-shadow: 0 20px 40px rgba(102, 126, 234, 0.4);
    }
    
    .location-card {
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        border-radius: 20px;
        overflow: hidden;
        position: relative;
        height: 250px;
        color: white;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    }
    
    .location-card img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .location-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
    }
    
    .location-card:hover img {
        transform: scale(1.15);
    }
    
    .location-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
        padding: 30px 25px 25px;
        backdrop-filter: blur(5px);
    }
    
    .location-overlay h6 {
        font-size: 1.25rem;
        margin-bottom: 5px;
        text-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }
    
    .cta-section {
        background: var(--dark-gradient);
        color: white;
        padding: 100px 0;
        position: relative;
        overflow: hidden;
    }
    
    .cta-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
        opacity: 0.1;
    }
    
    .section-title {
        position: relative;
        display: inline-block;
        margin-bottom: 1.5rem;
    }
    
    .section-title::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 4px;
        background: var(--primary-gradient);
        border-radius: 2px;
    }
    
    @media (max-width: 768px) {
        .hero-section {
            padding: 120px 0 80px;
            background-attachment: scroll;
        }
        
        .hero-title {
            font-size: 2.5rem;
        }
        
        .hero-subtitle {
            font-size: 1.1rem;
        }
        
        .search-card {
            padding: 1.5rem;
            margin: 0 10px;
        }
        
        .stat-card {
            padding: 1.5rem 1rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container position-relative">
        <div class="row justify-content-center">
            <div class="col-lg-10 text-center">
                <h1 class="hero-title mb-4">Find Your Dream Home Today!</h1>
                <p class="hero-subtitle mb-5">We collect the best properties from Facebook and various sources. Affordable prices, great locations, and secure housing solutions.</p>
                
                <!-- Advanced Search -->
                <div class="search-card">
                    <form action="{% url 'makazi:listings' %}" method="get" class="row g-3">
                        <div class="col-lg-4">
                            <div class="input-group input-group-lg">
                                <span class="input-group-text bg-gradient-primary text-white border-0">
                                    <i class="bi bi-geo-alt fs-5"></i>
                                </span>
                                <input type="text" class="form-control border-0" 
                                       name="location" 
                                       placeholder="Enter location..."
                                       style="background: #f8f9fa;">
                            </div>
                        </div>
                        
                        <div class="col-lg-3">
                            <select class="form-select border-0 h-100" name="property_type" style="background: #f8f9fa;">
                                <option value="">Property Type</option>
                                <option value="house">House</option>
                                <option value="apartment">Apartment</option>
                                <option value="room">Room</option>
                                <option value="plot">Plot</option>
                                <option value="commercial">Commercial</option>
                            </select>
                        </div>
                        
                        <div class="col-lg-3">
                            <select class="form-select border-0 h-100" name="bedrooms" style="background: #f8f9fa;">
                                <option value="">Bedrooms</option>
                                <option value="1">1 Bedroom</option>
                                <option value="2">2 Bedrooms</option>
                                <option value="3">3 Bedrooms</option>
                                <option value="4">4+ Bedrooms</option>
                            </select>
                        </div>
                        
                        <div class="col-lg-2">
                            <button type="submit" class="btn btn-lg btn-primary w-100 h-100" style="background: var(--primary-gradient); border: none;">
                                <i class="bi bi-search me-2"></i>Search
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Statistics -->
<section class="py-5" style="background: #f8f9fa;">
    <div class="container">
        <div class="row g-4">
            <div class="col-md-3 col-6">
                <div class="stat-card text-center">
                    <h2 class="display-4 fw-bold mb-2">{{ total_listings|default:"500+" }}</h2>
                    <p style="color: white;" class="mb-0 fs-5">Properties Available</p>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="stat-card text-center">
                    <h2 class="display-4 fw-bold mb-2">{{ popular_locations|length|default:"20+" }}</h2>
                    <p style="color: white;" class="mb-0 fs-5">Locations</p>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="stat-card text-center">
                    <h2 class="display-4 fw-bold mb-2">100%</h2>
                    <p style="color: white;" class="mb-0 fs-5">Free Service</p>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="stat-card text-center">
                    <h2 class="display-4 fw-bold mb-2">24/7</h2>
                    <p style="color: white;" class="mb-0 fs-5">Available</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Listings -->
<section class="py-5">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-5">
            <div>
                <h2 class="section-title fw-bold">Featured Properties</h2>
                <p class="text-muted">Carefully selected premium properties</p>
            </div>
            <a href="{% url 'makazi:listings' %}" class="btn btn-primary" style="background: var(--primary-gradient); border: none;">
                View All <i class="bi bi-arrow-right ms-2"></i>
            </a>
        </div>
        
        <div class="row g-4">
            {% for listing in featured_listings %}
            <div class="col-xl-3 col-lg-4 col-md-6">
                <div class="property-card">
                    <div class="position-relative">
                        <img src="{{ listing.main_image_url|default:'/static/images/default-property.jpg' }}" 
                             class="img-fluid w-100" 
                             style="height: 250px; object-fit: cover;" 
                             alt="{{ listing.title }}"
                             onerror="this.src='/static/images/default-property.jpg'">
                        <div class="property-badge">
                            {{ listing.property_type|default:"Property" }}
                        </div>
                        <div class="position-absolute top-0 end-0 m-3">
                            <button class="btn btn-light btn-sm rounded-circle favorite-btn" 
                                    data-listing-id="{{ listing.id }}"
                                    title="Save">
                                <i class="bi bi-heart"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="p-4">
                        <h6 class="fw-bold text-truncate mb-2">{{ listing.title }}</h6>
                        <p class="text-muted small mb-3">
                            <i class="bi bi-geo-alt me-1"></i>{{ listing.location|truncatechars:30 }}
                        </p>
                        
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <span class="text-primary fw-bold fs-5">
                                TSh {{ listing.price }}
                            </span>
                            {% if listing.bedrooms %}
                            <span class="badge bg-light text-dark px-3 py-2">
                                <i class="bi bi-door-closed me-1"></i>{{ listing.bedrooms }} Beds
                            </span>
                            {% endif %}
                        </div>
                        
                        <div class="d-flex justify-content-between align-items-center">
                            <small class="text-muted">
                                <i class="bi bi-clock me-1"></i>{{ listing.scraped_at|timesince }} ago
                            </small>
                            <a href="{{ listing.get_absolute_url }}" class="btn btn-sm btn-primary" 
                               style="background: var(--primary-gradient); border: none;">
                                View <i class="bi bi-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-12 text-center py-5">
                <i class="bi bi-house-exclamation display-1 text-muted mb-4"></i>
                <h4 class="fw-bold mb-3">No Properties Available</h4>
                <p class="text-muted">Please check back later</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Property Categories -->
<section class="py-5" style="background: #f8f9fa;">
    <div class="container">
        <h2 class="section-title fw-bold text-center mb-5">Property Categories</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="category-card text-center p-5">
                    <div class="feature-icon">
                        <i class="bi bi-house-door text-white fs-2"></i>
                    </div>
                    <h5 class="fw-bold mt-4 mb-3">Houses</h5>
                    <p class="text-muted mb-4">Family homes, bungalows, and permanent residences</p>
                    <a href="{% url 'makazi:listings' %}?property_type=house" 
                       class="btn btn-primary" 
                       style="background: var(--primary-gradient); border: none;">
                        View Houses <i class="bi bi-arrow-right"></i>
                    </a>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="category-card text-center p-5">
                    <div class="feature-icon">
                        <i class="bi bi-building text-white fs-2"></i>
                    </div>
                    <h5 class="fw-bold mt-4 mb-3">Apartments</h5>
                    <p class="text-muted mb-4">Flats and rental rooms in urban areas</p>
                    <a href="{% url 'makazi:listings' %}?property_type=apartment" 
                       class="btn btn-primary" 
                       style="background: var(--primary-gradient); border: none;">
                        View Apartments <i class="bi bi-arrow-right"></i>
                    </a>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="category-card text-center p-5">
                    <div class="feature-icon">
                        <i class="bi bi-map text-white fs-2"></i>
                    </div>
                    <h5 class="fw-bold mt-4 mb-3">Plots & Land</h5>
                    <p class="text-muted mb-4">Construction plots and farmlands</p>
                    <a href="{% url 'makazi:listings' %}?property_type=plot" 
                       class="btn btn-primary" 
                       style="background: var(--primary-gradient); border: none;">
                        View Plots <i class="bi bi-arrow-right"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Latest Listings -->
<section class="py-5">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-5">
            <div>
                <h2 class="section-title fw-bold">Recently Added</h2>
                <p class="text-muted">Newly listed properties</p>
            </div>
            <a href="{% url 'makazi:listings' %}" class="btn btn-primary" style="background: var(--primary-gradient); border: none;">
                View All <i class="bi bi-arrow-right ms-2"></i>
            </a>
        </div>
        
        <div class="row">
            {% for listing in latest_listings %}
            <div class="col-lg-6 mb-4">
                <div class="property-card h-100">
                    <div class="row g-0 h-100">
                        <div class="col-md-5">
                            <img src="{{ listing.main_image_url|default:'/static/images/default-property.jpg' }}" 
                                 class="img-fluid h-100" 
                                 style="object-fit: cover; min-height: 220px;"
                                 alt="{{ listing.title }}"
                                 onerror="this.src='/static/images/default-property.jpg'">
                        </div>
                        <div class="col-md-7">
                            <div class="p-4 h-100 d-flex flex-column">
                                <div>
                                    <h6 class="fw-bold mb-2">{{ listing.title|truncatechars:50 }}</h6>
                                    <p class="text-muted small mb-3">
                                        <i class="bi bi-geo-alt me-1"></i>{{ listing.location }}
                                    </p>
                                    <p class="small text-muted mb-4">
                                        {{ listing.description|truncatechars:120 }}
                                    </p>
                                </div>
                                
                                <div class="mt-auto">
                                    <div class="d-flex justify-content-between align-items-center mb-4">
                                        <span class="text-primary fw-bold fs-5">
                                            TSh {{ listing.price }}
                                        </span>
                                        {% if listing.bedrooms %}
                                        <span class="badge bg-light text-dark px-3 py-2">
                                            <i class="bi bi-door-closed me-1"></i>{{ listing.bedrooms }} Bedrooms
                                        </span>
                                        {% endif %}
                                    </div>
                                    
                                    <div class="d-flex justify-content-between align-items-center">
                                        <small class="text-muted">
                                            <i class="bi bi-clock me-1"></i>{{ listing.scraped_at|timesince }} ago
                                        </small>
                                        <a href="{{ listing.get_absolute_url }}" class="btn btn-sm btn-primary" 
                                           style="background: var(--primary-gradient); border: none;">
                                            View <i class="bi bi-arrow-right ms-1"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Popular Locations -->
<section class="py-5" style="background: #f8f9fa;">
    <div class="container">
        <h2 class="section-title fw-bold text-center mb-5">Popular Locations</h2>
        <div class="row g-4">
            {% for location in popular_locations %}
            <div class="col-lg-3 col-md-4 col-6">
                <a href="{% url 'makazi:listings' %}?location={{ location.location }}" class="text-decoration-none">
                    <div class="location-card">
                        <img src="https://images.unsplash.com/photo-{{ forloop.counter|add:10 }}?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" 
                             alt="{{ location.location }}">
                        <div class="location-overlay">
                            <h6 class="fw-bold mb-1">{{ location.location }}</h6>
                            <small>{{ location.count }} Properties</small>
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="cta-section">
    <div class="container">
        <div class="row justify-content-center text-center">
            <div class="col-lg-8 position-relative">
                <h2 class="fw-bold mb-4 display-5">Have a Property to Sell or Rent?</h2>
                <p style="color: white;" class="lead mb-5">Contact us today and list your property to reach thousands of potential buyers or tenants</p>
                <a href="#" class="btn btn-light btn-lg px-5 py-3 fw-bold" style="border-radius: 50px;">
                    <i class="bi bi-whatsapp me-2"></i>Upload Now
                </a>
            </div>
            {% comment %}
            <div class="col-lg-8 position-relative">
                <h2 class="fw-bold mb-4 display-5">Have a Property to Sell or Rent?</h2>
                <p class="lead mb-5">Contact us today and list your property to reach thousands of potential buyers or tenants</p>
                <a href="{% url 'makazi:contact' %}" class="btn btn-light btn-lg px-5 py-3 fw-bold" style="border-radius: 50px;">
                    <i class="bi bi-whatsapp me-2"></i>Contact Us Now
                </a>
            </div>
             {% endcomment %}
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    // Property favorite functionality
    document.addEventListener('DOMContentLoaded', function() {
        // Favorite buttons
        const favoriteButtons = document.querySelectorAll('.favorite-btn');
        favoriteButtons.forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                const listingId = this.dataset.listingId;
                const icon = this.querySelector('i');
                
                if (icon.classList.contains('bi-heart')) {
                    icon.className = 'bi bi-heart-fill text-danger';
                    saveToFavorites(listingId);
                    showToast('Added to favorites');
                } else {
                    icon.className = 'bi bi-heart';
                    removeFromFavorites(listingId);
                    showToast('Removed from favorites');
                }
            });
        });
        
        // Check initial favorite status
        favoriteButtons.forEach(button => {
            const listingId = button.dataset.listingId;
            const favorites = JSON.parse(localStorage.getItem('nyumbafasta_favorites') || '[]');
            if (favorites.includes(listingId)) {
                button.querySelector('i').className = 'bi bi-heart-fill text-danger';
            }
        });
        
        function saveToFavorites(listingId) {
            let favorites = JSON.parse(localStorage.getItem('nyumbafasta_favorites') || '[]');
            if (!favorites.includes(listingId)) {
                favorites.push(listingId);
                localStorage.setItem('nyumbafasta_favorites', JSON.stringify(favorites));
            }
        }
        
        function removeFromFavorites(listingId) {
            let favorites = JSON.parse(localStorage.getItem('nyumbafasta_favorites') || '[]');
            favorites = favorites.filter(id => id !== listingId);
            localStorage.setItem('nyumbafasta_favorites', JSON.stringify(favorites));
        }
        
        // Toast notification function
        function showToast(message) {
            // Create toast element
            const toast = document.createElement('div');
            toast.className = 'toast align-items-center text-white bg-primary border-0';
            toast.setAttribute('role', 'alert');
            toast.setAttribute('aria-live', 'assertive');
            toast.setAttribute('aria-atomic', 'true');
            
            toast.innerHTML = `
                <div class="d-flex">
                    <div class="toast-body">
                        <i class="bi bi-check-circle-fill me-2"></i>${message}
                    </div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                </div>
            `;
            
            // Add to container
            const container = document.createElement('div');
            container.className = 'toast-container position-fixed bottom-0 end-0 p-3';
            container.appendChild(toast);
            document.body.appendChild(container);
            
            // Initialize and show toast
            const bsToast = new bootstrap.Toast(toast, { delay: 3000 });
            bsToast.show();
            
            // Remove after hide
            toast.addEventListener('hidden.bs.toast', function () {
                container.remove();
            });
        }
        
        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    });
</script>
{% endblock %}