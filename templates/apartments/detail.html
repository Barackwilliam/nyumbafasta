<!-- templates/apartments/detail.html -->
{% extends 'base.html' %}
{% load static %}

{% block title %}{{ apartment.title }} - NyumbaFasta{% endblock %}

{% block extra_css %}
<style>
    /* ===== MAIN STYLES ===== */
    .apartment-detail-hero {
        background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.6)),
                    url('{% if apartment.main_image %}{{ apartment.main_image.url }}{% else %}https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?ixlib=rb-4.0.3{% endif %}');
        background-size: cover;
        background-position: center;
        padding: 100px 0 60px;
        color: white;
    }
    
    .main-image-container {
        height: 400px;
        border-radius: 15px;
        overflow: hidden;
        margin-bottom: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }
    
    .main-image-container img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
    }
    
    .main-image-container img:hover {
        transform: scale(1.03);
    }
    
    .thumbnail-images {
        display: flex;
        gap: 10px;
        margin-bottom: 25px;
        flex-wrap: wrap;
    }
    
    .thumbnail {
        width: 80px;
        height: 80px;
        border-radius: 10px;
        overflow: hidden;
        cursor: pointer;
        border: 3px solid transparent;
        transition: all 0.3s ease;
    }
    
    .thumbnail:hover,
    .thumbnail.active {
        border-color: #4361ee;
        transform: scale(1.1);
    }
    
    .thumbnail img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    
    .booking-card {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 90px;
        border: 1px solid #e9ecef;
    }
    
    .price-display {
        background: linear-gradient(135deg, #4361ee 0%, #3a56d4 100%);
        color: white;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 20px;
        text-align: center;
    }
    
    .monthly-price {
        font-size: 2.2rem;
        font-weight: 800;
        margin-bottom: 5px;
    }
    
    .feature-item {
        display: flex;
        align-items: center;
        margin-bottom: 12px;
        padding: 12px;
        background: #f8f9fa;
        border-radius: 10px;
        transition: transform 0.3s ease;
    }
    
    .feature-item:hover {
        transform: translateX(5px);
        background: #e9ecef;
    }
    
    .amenity-icon {
        width: 45px;
        height: 45px;
        background: rgba(67, 97, 238, 0.1);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 15px;
        color: #4361ee;
        font-size: 1.2rem;
    }
    
    /* ===== ADS MODULES STYLES ===== */
    
    /* MODULE 1: Premium Banner */
    .premium-ad-module {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 15px;
        padding: 25px;
        margin: 30px 0;
        color: white;
        position: relative;
        overflow: hidden;
        isolation: isolate;
    }
    
    .premium-ad-module::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -50%;
        width: 200px;
        height: 200px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        z-index: -1;
    }
    
    .premium-ad-module::after {
        content: '';
        position: absolute;
        bottom: -30%;
        left: -30%;
        width: 150px;
        height: 150px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 50%;
        z-index: -1;
    }
    
    .premium-ad-module .typed-text {
        color: #ffd700;
        font-weight: 700;
        min-height: 32px;
    }
    
    .premium-ad-module .cursor {
        display: inline-block;
        width: 3px;
        background-color: white;
        animation: blink 1s infinite;
        margin-left: 2px;
    }
    
    /* MODULE 2: Advertising Slider */
    .slider-ad-module {
        position: relative;
        height: 280px;
        border-radius: 20px;
        overflow: hidden;
        margin: 30px 0;
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        box-shadow: 0 20px 60px rgba(30, 60, 114, 0.4);
        isolation: isolate;
    }
    
    .ad-slide {
        position: absolute;
        inset: 0;
        padding: 30px;
        color: #fff;
        opacity: 0;
        transform: translateX(40px);
        transition: all 0.8s ease;
        z-index: 1;
    }
    
    .ad-slide.active {
        opacity: 1;
        transform: translateX(0);
        z-index: 2;
    }
    
    .ad-slide .ad-badge {
        display: inline-block;
        background: rgba(255, 255, 255, 0.2);
        padding: 8px 16px;
        border-radius: 50px;
        font-size: 12px;
        font-weight: 700;
        margin-bottom: 15px;
        backdrop-filter: blur(10px);
    }
    
    .ad-slide h4 {
        font-size: 1.5rem;
        font-weight: 800;
        margin-bottom: 15px;
    }
    
    .ad-slide .typing {
        min-height: 50px;
        font-size: 1rem;
        line-height: 1.6;
        margin-bottom: 25px;
    }
    
    .ad-slide .typing span::after {
        content: "▍";
        animation: blink 1s infinite;
    }
    
    .ad-slide .ad-btn {
        display: inline-block;
        background: linear-gradient(135deg, #fff, #e0e7ff);
        color: #1e3c72;
        padding: 14px 28px;
        border-radius: 12px;
        font-weight: 700;
        text-decoration: none;
        transition: all 0.3s ease;
    }
    
    .ad-slide .ad-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }
    
    /* MODULE 3: Sidebar Ads */
    .sidebar-ad-module {
        background: white;
        border-radius: 12px;
        overflow: hidden;
        margin-bottom: 20px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        border: 1px solid #e9ecef;
        transition: transform 0.3s ease;
        isolation: isolate;
    }
    
    .sidebar-ad-module:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
    }
    
    .sidebar-ad-module.premium {
        border: 2px solid #ffd700;
        position: relative;
    }
    
    .sidebar-ad-module .ad-badge {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #ffd700;
        color: #000;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 700;
        z-index: 2;
    }
    
    .sidebar-ad-module .ad-image {
        height: 180px;
        overflow: hidden;
        position: relative;
    }
    
    .sidebar-ad-module .ad-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
    }
    
    .sidebar-ad-module:hover .ad-image img {
        transform: scale(1.05);
    }
    
    .sidebar-ad-module .ad-content {
        padding: 20px;
    }
    
    .sidebar-ad-module .ad-title {
        font-size: 1.1rem;
        font-weight: 700;
        margin-bottom: 10px;
        color: #2d3748;
    }
    
    .sidebar-ad-module .ad-description {
        font-size: 0.9rem;
        color: #718096;
        margin-bottom: 15px;
        line-height: 1.5;
    }
    
    .sidebar-ad-module .ad-price {
        color: #10b981;
        font-weight: 700;
        font-size: 1.2rem;
    }
    
    /* MODULE 4: Sponsored Ads */
    .sponsored-ad-module {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 12px;
        text-align: center;
        margin: 20px 0;
        border: 2px dashed #4361ee;
        isolation: isolate;
    }
    
    .sponsored-ad-module .sponsor-label {
        font-size: 0.8rem;
        color: #4361ee;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        margin-bottom: 10px;
        font-weight: 700;
    }
    
    .sponsored-ad-module .sponsor-text {
        font-size: 1rem;
        color: #2d3748;
        margin-bottom: 15px;
    }
    
    /* ===== ANIMATIONS ===== */
    @keyframes blink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0; }
    }
    
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }
    
    @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
    }
    
    .pulse-animation {
        animation: pulse 3s infinite;
    }
    
    .float-animation {
        animation: float 6s ease-in-out infinite;
    }
    
    /* ===== RESPONSIVE ===== */
    @media (max-width: 768px) {
        .apartment-detail-hero {
            padding: 80px 0 30px;
        }
        
        .main-image-container {
            height: 250px;
        }
        
        .booking-card {
            position: static;
            margin-top: 25px;
        }
        
        .slider-ad-module {
            height: 250px;
        }
        
        .premium-ad-module {
            padding: 20px;
        }
        
        .ad-slide {
            padding: 20px;
        }
        
        .ad-slide h4 {
            font-size: 1.3rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="apartment-detail-hero">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="{% url 'makazi:apartments_list' %}" class="text-white">Apartments</a></li>
                        <li class="breadcrumb-item"><a href="{% url 'makazi:apartments_list' %}?location={{ apartment.location }}" class="text-white">{{ apartment.location }}</a></li>
                        <li class="breadcrumb-item active text-white" aria-current="page">{{ apartment.title }}</li>
                    </ol>
                </nav>
                
                <h1 class="fw-bold mb-2">{{ apartment.title }}</h1>
                
                <div class="d-flex align-items-center gap-4 mb-3">
                    <div class="d-flex align-items-center">
                        <i class="bi bi-geo-alt-fill me-2"></i>
                        <span>{{ apartment.location }}</span>
                    </div>
                    {% if apartment.is_verified %}
                    <span class="badge bg-success">
                        <i class="bi bi-check-circle me-1"></i> Verified
                    </span>
                    {% endif %}
                    {% if apartment.is_available %}
                    <span class="badge bg-success">
                        <i class="bi bi-check-circle me-1"></i> Available
                    </span>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Main Content -->
<section class="py-4">
    <div class="container">
        <div class="row">
            <!-- Left Column: Images & Details -->
            <div class="col-lg-8">
                <!-- Main Image -->
                <div class="main-image-container">
                    {% if apartment.main_image %}
                        <img src="{{ apartment.main_image.url }}" 
                             alt="{{ apartment.title }}" 
                             id="mainImage">
                    {% else %}
                        <div class="d-flex flex-column align-items-center justify-content-center text-white" 
                             style="height: 100%; background: linear-gradient(135deg, #4361ee 0%, #3a56d4 100%);">
                            <i class="bi bi-building fs-1"></i>
                            <p class="mt-2">No Image Available</p>
                        </div>
                    {% endif %}
                </div>
                
                <!-- Thumbnail Images -->
                {% with images=apartment.get_all_images %}
                {% if images|length > 1 %}
                <div class="thumbnail-images">
                    {% for image_url in images %}
                    <div class="thumbnail {% if forloop.first %}active{% endif %}" 
                         onclick="changeMainImage('{{ image_url }}', this)">
                        <img src="{{ image_url }}" alt="Apartment image {{ forloop.counter }}">
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
                {% endwith %}
               
                
                <!-- Apartment Details -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h3 class="mb-4">About This Apartment</h3>
                        <p class="lead">{{ apartment.description }}</p>
                        
                        <!-- Key Features -->
                        <div class="mt-4">
                            <h5 class="mb-3">Key Features</h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="feature-item">
                                        <div class="amenity-icon">
                                            <i class="bi bi-house-door"></i>
                                        </div>
                                        <div>
                                            <h6 class="mb-1">Property Type</h6>
                                            <p class="mb-0">{{ apartment.get_apartment_type_display }}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="feature-item">
                                        <div class="amenity-icon">
                                            <i class="bi bi-calendar-check"></i>
                                        </div>
                                        <div>
                                            <h6 class="mb-1">Available From</h6>
                                            <p class="mb-0">{{ apartment.available_from|date:"F d, Y" }}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="feature-item">
                                        <div class="amenity-icon">
                                            <i class="bi bi-door-closed"></i>
                                        </div>
                                        <div>
                                            <h6 class="mb-1">Bedrooms</h6>
                                            <p class="mb-0">{{ apartment.bedrooms }} Bedrooms</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="feature-item">
                                        <div class="amenity-icon">
                                            <i class="bi bi-droplet"></i>
                                        </div>
                                        <div>
                                            <h6 class="mb-1">Bathrooms</h6>
                                            <p class="mb-0">{{ apartment.bathrooms }} Bathrooms</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>             <!-- Location -->
                        <div class="mt-4">
                            <h5 class="mb-3">Location</h5>
                            <p><i class="bi bi-geo-alt text-primary me-2"></i>{{ apartment.address }}, {{ apartment.location }}</p>
                        </div>
                        
                        <!-- MODULE 2: Advertising Slider -->
                        <div class="slider-ad-module">
                            <div class="ad-slide active">
                                <span class="ad-badge">Premium Advertising</span>
                                <h4 style="color: yellow;">Grow Your Business</h4>
                                <p class="typing"><span></span></p>
                                <a href="#" class="ad-btn">Advertise With Us</a>
                            </div>
                            
                            <div class="ad-slide">
                                <span class="ad-badge">Featured Spot</span>
                                <h4>Reach Serious Buyers</h4>
                                <p class="typing"><span></span></p>
                                <a href="#" class="ad-btn">Start Advertising</a>
                            </div>
                            
                            <div class="ad-slide">
                                <span class="ad-badge">High Visibility</span>
                                <h4>Boost Brand Exposure</h4>
                                <p class="typing"><span></span></p>
                                <a href="#" class="ad-btn">Book Ad Space</a>
                            </div>
                        </div>
                        
                        
                    </div>
                </div>
            </div>
            
            <!-- Right Column: Booking Card & Ads -->
            <div class="col-lg-4">
                <!-- Booking Card -->
                <div class="booking-card">
                    <!-- Price Display -->
                    <div class="price-display">
                        <div style="color: yellow;" class="monthly-price">
                            TSh {{ apartment.price_per_month|floatformat:0 }}
                        </div>
                        <div style="color: yellow;">per Day</div>
                    </div>



                    <div id="bookingMessage" class="alert alert-success d-none">
                    <i class="bi bi-check-circle-fill me-2"></i>
                    Booking submitted successfully! We’ll contact you shortly.
                </div>

                    
                    <!-- Booking Form -->
                    <form method="post" id="bookingForm">
                        {% csrf_token %}
                        <input type="hidden" name="book_now" value="1">
                        
                        <div class="mb-3">
                            <label class="form-label">Check-in Date</label>
                            <input type="date" class="form-control" name="check_in_date" required>

                        </div><div class="mb-3">
                            <label class="form-label">Check-Out Date</label>
                            <input type="date" class="form-control" name="check_out_date" required>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Duration (Days)</label>
                            <select class="form-select" name="duration_months">
                                <option value="1">1 - 3 Days</option>
                                <option value="3">4 - 7 Days</option>
                                <option value="4">2 weeks</option>
                                <option value="5">3 - 4 weeks</option>
                                <option value="6">2 Months</option>
                                <option value="7">3 Months</option>
                                <option value="8">6 Months</option>
                                <option value="12">12 Months</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Full Name</label>
                            <input type="text" class="form-control" name="customer_name" required>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" name="phone_number" required>
                        </div>
                        
                        <button type="submit" class="btn btn-primary w-100 py-3 fw-bold">
                            <i class="bi bi-calendar-check me-2"></i>Book Now
                        </button>
                    </form>
                </div>
                
                
              
                <!-- Another Sidebar Ad -->
                 
                
            </div>
        </div>
    </div>

     
                <!-- MODULE 1: Premium Ad Banner -->
                <!-- <div class="premium-ad-module float-animation">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <h4 class="fw-bold mb-3">
                                <span class="typed-text"></span>
                                <span class="cursor">&nbsp;</span>
                            </h4>
                            
                            <div class="sliding-messages mb-3">
                                <div class="message active">
                                    <i class="bi bi-eye-fill me-2"></i>Get <strong>3x more views</strong>
                                </div>
                                <div class="message">
                                    <i class="bi bi-lightning-fill me-2"></i>Bookings <strong>5x faster</strong>
                                </div>
                                <div class="message">
                                    <i class="bi bi-award-fill me-2"></i>Featured in <strong>top results</strong>
                                </div>
                            </div>
                            
                            <a href="#" class="btn btn-light btn-lg">
                                <i class="bi bi-rocket-takeoff me-2"></i>Upgrade to Premium
                            </a>
                        </div>
                        <div class="col-md-4 text-md-end mt-3 mt-md-0">
                            <div class="bg-white text-dark p-3 rounded pulse-animation">
                                <div class="fs-6 text-muted">Starting at</div>
                                <div class="fs-4 fw-bold">TSh 100,000</div>
                                <div class="fs-7 text-muted">/month</div>
                            </div>
                        </div>
                    </div>
                </div> -->
</section>
{% endblock %}

{% block extra_js %}
<script>
// ===== AD MODULES SYSTEM =====
// Kila module ina script yake isiyoathiri nyingine

// MODULE 1: Premium Ad Module
const PremiumAdModule = (function() {
    const module = document.querySelector('.premium-ad-module');
    
    if (!module) return;
    
    const typedTextSpan = module.querySelector('.typed-text');
    const cursorSpan = module.querySelector('.cursor');
    
    const textArray = [
        "Premium List Your Property!",
        "Get Featured Today!",
        "Stand Out from Competition!",
        "Maximize Your Bookings!"
    ];
    
    let textArrayIndex = 0;
    let charIndex = 0;
    let isTyping = true;
    
    function type() {
        if (charIndex < textArray[textArrayIndex].length) {
            typedTextSpan.textContent += textArray[textArrayIndex].charAt(charIndex);
            charIndex++;
            setTimeout(type, 100);
        } else {
            isTyping = false;
            cursorSpan.classList.remove('typing');
            setTimeout(erase, 2000);
        }
    }
    
    function erase() {
        if (charIndex > 0) {
            typedTextSpan.textContent = textArray[textArrayIndex].substring(0, charIndex-1);
            charIndex--;
            setTimeout(erase, 50);
        } else {
            textArrayIndex = (textArrayIndex + 1) % textArray.length;
            isTyping = true;
            cursorSpan.classList.add('typing');
            setTimeout(type, 500);
        }
    }
    
    function initSlidingMessages() {
        const messages = module.querySelectorAll('.message');
        if (messages.length === 0) return;
        
        let currentMessage = 0;
        
        function showNextMessage() {
            messages.forEach(msg => msg.classList.remove('active'));
            messages[currentMessage].classList.add('active');
            currentMessage = (currentMessage + 1) % messages.length;
            setTimeout(showNextMessage, 3000);
        }
        
        showNextMessage();
    }
    
    // Initialize
    cursorSpan.classList.add('typing');
    setTimeout(type, 1000);
    initSlidingMessages();
    
    // Clean up when leaving page
    window.addEventListener('beforeunload', () => {
        typedTextSpan.textContent = '';
        cursorSpan.classList.remove('typing');
    });
})();

// MODULE 2: Slider Ad Module
const SliderAdModule = (function() {
    const module = document.querySelector('.slider-ad-module');
    
    if (!module) return;
    
    const slides = module.querySelectorAll('.ad-slide');
    const typingSpans = module.querySelectorAll('.typing span');
    
    const adTexts = [
        [
            "Turn visitors into paying customers.",
            "Advertise where buyers are searching daily."
        ],
        [
            "Reach serious buyers instantly.",
            "Get premium visibility on our platform."
        ],
        [
            "Boost your brand awareness.",
            "Your business deserves premium exposure."
        ]
    ];
    
    let slideIndex = 0;
    let textIndex = 0;
    let charIndex = 0;
    let isTyping = true;
    let slideInterval;
    
    function typeText() {
        const currentSlide = slides[slideIndex];
        const span = currentSlide.querySelector('.typing span');
        const text = adTexts[slideIndex][textIndex];
        
        span.textContent = text.slice(0, charIndex++);
        
        if (charIndex <= text.length) {
            setTimeout(typeText, 50);
        } else {
            isTyping = false;
            setTimeout(() => {
                charIndex = 0;
                textIndex = (textIndex + 1) % adTexts[slideIndex].length;
                isTyping = true;
                typeText();
            }, 1500);
        }
    }
    
    function showSlide(index) {
        slides.forEach(slide => slide.classList.remove('active'));
        slides[index].classList.add('active');
        textIndex = 0;
        charIndex = 0;
        isTyping = true;
        typeText();
    }
    
    function nextSlide() {
        if (isTyping) return; // Don't change slides while typing
        
        slideIndex = (slideIndex + 1) % slides.length;
        showSlide(slideIndex);
    }
    
    function init() {
        showSlide(0);
        slideInterval = setInterval(nextSlide, 7000);
        
        // Pause on hover
        module.addEventListener('mouseenter', () => {
            clearInterval(slideInterval);
        });
        
        module.addEventListener('mouseleave', () => {
            slideInterval = setInterval(nextSlide, 7000);
        });
    }
    
    // Initialize
    init();
    
    // Clean up
    window.addEventListener('beforeunload', () => {
        clearInterval(slideInterval);
        typingSpans.forEach(span => span.textContent = '');
    });
})();

// MODULE 3: Sidebar Ads Interactions
const SidebarAdsModule = (function() {
    const modules = document.querySelectorAll('.sidebar-ad-module');
    
    if (modules.length === 0) return;
    
    modules.forEach(module => {
        module.addEventListener('click', function() {
            const title = this.querySelector('.ad-title').textContent;
            console.log('Ad clicked:', title);
            // Add your click tracking logic here
        });
        
        // Add view tracking
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const title = entry.target.querySelector('.ad-title').textContent;
                    console.log('Ad viewed:', title);
                    // Add your view tracking logic here
                }
            });
        }, { threshold: 0.5 });
        
        observer.observe(module);
    });
})();

// ===== APARTMENT FUNCTIONALITY =====
// Change main image when thumbnail is clicked
function changeMainImage(imageUrl, element) {
    const mainImage = document.getElementById('mainImage');
    if (mainImage) {
        mainImage.src = imageUrl;
        
        // Remove active class from all thumbnails
        document.querySelectorAll('.thumbnail').forEach(thumb => {
            thumb.classList.remove('active');
        });
        
        // Add active class to clicked thumbnail
        element.classList.add('active');
    }
}

// Initialize date picker
document.addEventListener('DOMContentLoaded', function() {
    const checkInInput = document.querySelector('input[name="check_in_date"]');
    if (checkInInput) {
        const today = new Date().toISOString().split('T')[0];
        checkInInput.min = today;
        
        const maxDate = new Date();
        maxDate.setFullYear(maxDate.getFullYear() + 1);
        checkInInput.max = maxDate.toISOString().split('T')[0];
    }
});

// ===== UTILITY FUNCTIONS =====
// Debounce function for performance
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}


</script>
{% endblock %}